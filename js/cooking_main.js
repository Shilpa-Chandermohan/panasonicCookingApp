//Copyright (C) 2014 Panasonic Corporation. All Rights Reserved.
//
//*****************************************************************/
// File Name: main.js
// Purpose: This document creates main page
// File Created Date: 28-Apr-2014
// Release Date: 10-Jun-2014
// Release Version: 0.3
//*****************************************************************/
try{var main=(function(window,document,main){"use strict";var main={keyCodeDic:{38:"arrowup",40:"arrowdown",37:"arrowleft",39:"arrowright",13:"ok",8:"return",120:"red",403:"red",404:"green",121:"green",405:"yellow",122:"yellow",406:"blue",123:"blue",49:"D1"},YQL:false,production:true,limitPage:false,versionChange:true,focusedDom:"",mainBg:"",menu:"",fromSearch:false,categoryCode:"FEATURED",localCode:"",selectedCountry:"",listingData:{},subCategory:"All",totalFired:30,selectedGrid:"",locationData:"",isDetail:false,currentItem:0,pageNumber:0,gridApiCall:0,fromBlueKey:false,fromBlueHotKey:false,fromYellowKey:false,oldCursor:"",theme:"",subMenuData:{},subMenuDataPg2:{},subMenuCode:{},subMenuCodePg2:{},searchKey:"",filter:"",fromComment:false};(function(){var imagesCode="",imagesBufArray;imagesBufArray=["images/logo.png","images/loading.png","images/panasonic_logo_Red.png","images/panasonic_logo_White.png","images/default_image.png","images/arrow.png","images/arrow_selected.png","images/grid_arrow_left.png","images/grid_arrow_right.png","images/error_icon.png","images/radio_c.png","images/radio_s.png","images/radio_u.png","images/white_hook.png","images/red_hook.png","images/orange_hook.png","images/green_hook.png","images/blue_hook.png","images/player/controls.png","images/player/hook.png","images/player/separator.png","images/detail_arrow.png","images/detailIcons.png","images/galleryArrow.png","images/sep_color_dot.png","images/bg_box.png","images/menu_bg.png","images/menu_blue.png","images/menu_blue_cursor.png","images/menu_green.png","images/menu_green_cursor.png","images/menu_orange.png","images/menu_orange_cursor.png","images/menu_red.png","images/menu_red_cursor.png","images/orange_submenu_cursor.png","images/red_submenu_cursor.png","images/blue_submenu_cursor.png","images/submenu_blue_selected.png","images/submenu_orange_selected.png","images/submenu_red_selected.png","images/submenu_hook_blue.png","images/submenu_hook_orange.png","images/submenu_hook_red.png",];var arrLength=imagesBufArray.length
for(var i=0;i<arrLength;i++){imagesCode+="<img id ='buffer_"+i+"' class='bufferImg' src= "+imagesBufArray[i]+"></img>";}
document.getElementById("buffer").innerHTML=imagesCode;}());(function(){var head=document.getElementsByTagName('head')[0];var script=document.createElement('script');script.type='text/javascript';script.src='js/cooking_aes.js';head.appendChild(script);}());main.target=function(e){!e&&(e=event);var target=(e.target||e.srcElement)||{};target.keyCode=e.which;return target;};main.MainKeyboardEvent=function(e,eventType){try{var target=main.target(e),keyCode=target.keyCode,key=main.keyCodeDic[keyCode];if(main.loading.isOn&&!main.splashScreen.isVisible){e.preventDefault();return;}
if(errorPopUp.isVisible&&main.grid.components.length>0){if(main.isAvailable("gridMask")){main.grid.hideGridMask();}
errorPopUp.hide();e.preventDefault();return;}
if(main.focusedDom&&main.focusedDom.KeyboardEvent&&main.focusedDom.KeyboardEvent(e,eventType)){return true;}
switch(eventType){case"keydown":switch(key){case"arrowdown":break;case"arrowup":break;case"ok":break;case"yellow":e.preventDefault();if(!main.locationPopup.isVisible&&!main.exitPopup.isVisible&&!main.networkPopup.isVisible&&!main.splashScreen.isVisible){if(!main.fromYellowKey){main.fromYellowKey=true;if(main.isDetail){detail.descObj.stopScrollText();}
if(main.isAvailable("locationDrop_0")){main.locDropdown.close();}
main.keyboardContainer.animTop();}}
break;case"blue":e.preventDefault();if(!main.locationPopup.isVisible&&!main.exitPopup.isVisible&&!main.networkPopup.isVisible&&!main.splashScreen.isVisible){if(!main.fromBlueKey&&!main.fromYellowKey){if(main.isDetail){detail.oldCursor=main.focusedDom;if(main.focusedDom!=main.mainBg){detail.prevCursor=main.focusedDom;}
detail.descObj.stopScrollText();}else{main.oldCursor=main.focusedDom;}
main.focusedDom.leave_focus();main.fromBlueKey=true;main.locDropdown.createLocationDropdown();}}
break;case"red":if(main.isDetail&&!main.fromYellowKey){if(detail.pageDetails.totalPage>1&&detail.pageDetails.currentPg!==1){detail.descObj.scrollDown();if(main.isAvailable("locationDrop_0")){main.locDropdown.close();}}}
break;case"green":if(main.isDetail&&!main.fromYellowKey){if(detail.pageDetails.totalPage>1&&detail.pageDetails.currentPg!==detail.pageDetails.totalPage){detail.descObj.scrollUp();if(main.isAvailable("locationDrop_0")){main.locDropdown.close();}}}
break;case"return":e.preventDefault();if(main.isDetail){clearInterval(detail.timer);innerSection.innerHTML="";main.grid.components=[];main.createInnerSection();}else if(main.fromSearch){main.mainBg.leave_focus();main.fromSearch=false;main.clearGridList();main.categoryCode="FEATURED";main.search.free();main.menuInitiate();}else if(main.splashScreen.isVisible){window.history.back();}else{e.preventDefault();main.oldCursor=main.focusedDom;main.oldCursor.leave_focus();main.exitPopup.create('grid');}
break;case"D1":document.cookie="location=; expires=Thu, 01 Jan 1970 00 0 0 GMT";break;}
return true;}
return true;}catch(e){}};main.getData=function(data){if(main.YQL&&data&&data.query&&data.query.results&&data.query.results.postresult&&data.query.results.postresult.p){return JSON.parse(data.query.results.postresult.p);}else{return data;}};function YQL(baseUrl){var query,yql;query="select * from htmlpost where url='"+baseUrl+"' and postdata='null' and xpath='//p'";yql="https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(query)+"&format=json&diagnostics=true&env=store://datatables.org/alltableswithkeys";return yql;}
main.generateUrl=function(baseUrl,param){var url=baseUrl||"",parameters=param||"";url=url+(main.fromComment?"":main.localCode)+"?token=c16dc40c61104941_"+encryptedToken.getToken()+parameters;url=url.replace(/[!'()]/g,escape).replace(/\*/g,"%2A");main.fromComment=false;if(main.YQL){url=YQL(url);}
return url;};return main;}(window,document,main));main.splashScreen=(function(window,document,main,splashScreen){"use strict";var splashScreen={isVisible:true},splash_cont=document.getElementById('splashScreen');splashScreen.start=function(){main.pageLoad();};splashScreen.free=function(){splash_cont.innerHTML="";splash_cont.parentNode.removeChild(splash_cont);splashScreen.isVisible=false;};return splashScreen;}(window,document,main,main.splashScreen));menuvalues=["FEATURED","#FOODHACKS","RECIPES","PRODUCTS","GALLERY"];main.menuColorList={"FEATURED":"#ef4023","FOODHACKS":"#ef4023","RECIPES":"#f8931f","PRODUCTS":"#009bde","GALLERY":"#53cf00","FOOD DIARY":"#009bde"};main.submenuClassList={"FOODHACKS":"subMenuRed","RECIPES":"subMenuOrange","PRODUCTS":"subMenuBlue",};if(main.production){main.baseUrl="https://cooking.panasonic.asia/";if(main.versionChange){main.api={location:"api/LocaleApi/GetLocales/",featured:"api/ActivityApi/GetActivities/",recipe:"api/RecipeApi/GetRecipesV2/",foodhacks:"api/RecipeApi/GetFoodHacksV2/",products:"api/ProductApi/GetProductsV2/",gallery:"api/GalleryApi/GetGalleriesV2/",search:"api/SearchApi/SearchAll/",comment:"api/RecipeApi/GetRecipeComments/"}}else{main.api={location:"api/LocaleApi/GetLocales/",featured:"api/ActivityApi/GetActivities/",recipe:"api/RecipeApi/GetRecipes/",foodhacks:"api/RecipeApi/GetFoodHacks/",products:"api/ProductApi/GetProducts/",gallery:"api/GalleryApi/GetGalleries/",search:"api/SearchApi/SearchAll/",comment:"api/RecipeApi/GetRecipeComments/"}}}else{main.baseUrl="http://138.91.32.64/panasonic-cooking2/";main.api={location:"api/LocaleApi/GetLocales/",featured:"api/ActivityApi/GetActivities/",recipe:"api/RecipeApi/GetRecipesV2/",foodhacks:"api/RecipeApi/GetFoodHacksV2/",products:"api/ProductApi/GetProductsV2/",gallery:"api/GalleryApi/GetGalleriesV2/",search:"api/SearchApi/SearchAll/",comment:"api/RecipeApi/GetRecipeComments/"}}
main.loading=document.getElementById("loading");main.loading.On=function(mask){try{if(main.isDetail){main.loading.className="loadingPosition";}else if(main.categoryCode==='FEATURED'||main.categoryCode==='GALLERY'){main.loading.className="loading loadingOn";}else{main.loading.className="loadingsub loadingOn";}
main.loading.isOn=true;}catch(e){}};main.loading.Off=function(){main.loading.className="loading loadingOff";main.loading.isOn=false;};main.isAvailable=function(node){return document.getElementById(node);};main.setOmitter=function(text,height,width,font,word){try{var height=height||60;var text=text||"";var width=width||274;var font=font||22;var wordWrap=word||false;var tempBg=main.createElement('div',{classname:'tempBg',id:'tempBg',content:text});if(main.isAvailable("tempBg"))
$("#tempBg").remove();$("body").append(tempBg);$('#tempBg').css("width",width+"px");$('#tempBg').css("font-size",font+"px");if(wordWrap){$('#tempBg').css("word-wrap","break-word");}else{$('#tempBg').css("word-wrap","normal");}
var divh=$('#tempBg').height();var txt=text;var count=0;while(divh>height){$('#tempBg').html(function(index,html){txt=html.replace(/\W*\s(\S)*$/,'...');return txt;});divh=$('#tempBg').height();}
$("#tempBg").remove();return txt;}catch(e){}};main.createElement=function(type,param){type=type||'div';param=param||{};var ele=document.createElement(type);if(param.classname){ele.className=param.classname;}
if(param.id){ele.id=param.id;}
if(param.content){ele.innerHTML=param.content;}
if(param.src){ele.src=param.src;}
return ele;};main.searchBase=function(){var menuSection,topHeading,subHeading;this.create_searchHeading=function(){menuSection=document.getElementById("menuSection");menuSection.innerHTML='<div id="topHeading"></div><div id="subHeading"></div>';topHeading=document.getElementById('topHeading'),subHeading=document.getElementById('subHeading');topHeading.innerHTML='<div id="searchText">Search result(s) of "<span id="stext">'+main.searchKey+'</span>"</div><span id="quots"></span><span id="goBack">Return to Menu</span>';subHeading.innerHTML='<span id="sort_By">Sort by "'+main.filter.replace('Most','Most ')+'"</span>';if($('#stext').outerWidth()>1054){$('#quots').text('"');}};this.resetKeyboardInfo=function(){main.keyboardContainer.textboxValue='';main.keyboardContainer.radioSelected='';};this.free=function(){topHeading.innerHTML='';subHeading.innerHTML='';topHeading.parentNode.removeChild(topHeading);subHeading.parentNode.removeChild(subHeading);this.resetKeyboardInfo();};};main.MenuContainer=function(){try{var currentItem=0;var prevSelected=0;var selectedItem=0;this.menuList=[];this.components=[];this.subMenu=null;this.createMenuList=function(param){$("#menuSection").removeClass('menuSection');$("#menuSection").addClass('menuSection');var location=param||"";switch(location){case"MY_EN":this.menuList=["FEATURED","#FOODHACKS","RECIPES","PRODUCTS","FOOD DIARY"];break;default:this.menuList=["FEATURED","#FOODHACKS","RECIPES","PRODUCTS","GALLERY"];break;}};this.baseMenu=function(param){var obj={'type':param.type,'isSelected':false};obj.wrapper=main.createElement('div',{classname:'menuItem',id:'menuItem_'+param.id,content:param.name,});obj.hook=main.createElement('div',{classname:'',id:'menuHook_'+param.id,});obj.wrapper.appendChild(obj.hook);obj.showHook=function(){obj.isSelected=true;$(obj.hook).addClass("menuHook");};obj.removeHook=function(){obj.isSelected=false;obj.hook.className="";};obj.setCursor=function(){$(obj.wrapper).addClass("menuCursor");if(obj.isSelected){$(obj.hook).addClass("menuHookWhite");}};obj.removeCursor=function(){$(obj.wrapper).removeClass("menuCursor");$(obj.hook).removeClass("menuHookWhite");};obj.makeSelected=function(){switch(obj.type){case"FEATURED":$(obj.hook).addClass("menuHookRed");$(obj.wrapper).addClass("menuSelectedRed");break;case"FOODHACKS":$(obj.hook).addClass("menuHookRed");$(obj.wrapper).addClass("menuSelectedRed");break;case"RECIPES":$(obj.hook).addClass("menuHookOrange");$(obj.wrapper).addClass("menuSelectedOrange");break;case"PRODUCTS":$(obj.hook).addClass("menuHookBlue");$(obj.wrapper).addClass("menuSelectedBlue");break;case"GALLERY":case"FOOD DIARY":$(obj.hook).addClass("menuHookGreen");$(obj.wrapper).addClass("menuSelectedGreen");break;}
obj.showHook();};obj.removeSelected=function(){obj.wrapper.className="menuItem";obj.removeHook();};obj.getType=function(){var ty=(obj.type=="FOOD DIARY")?"GALLERY":obj.type;return ty;};return obj;};this.action=function(){try{this.components[prevSelected].removeSelected();this.components[selectedItem].makeSelected();prevSelected=selectedItem;if(main.subMenuData[this.getCurrentType()]&&main.subMenuData[this.getCurrentType()].length){this.subMenu.reset();this.subMenu.create(main.subMenuData[this.getCurrentType()],this.getCurrentType());this.leave_focus();}else{this.subMenu.free();this.subMenu.reset();main.categoryCode=this.getCurrentType();this.leave_focus();main.clearGridList();main.getApi();}}catch(err){};};this.create=function(param){var parent=document.getElementById('menuSection');var local=param||"others"
this.createMenuList(local);if($("#menuMainBg").length)return;var mainMenu=main.createElement('div',{classname:'menuMainBg',id:'menuMainBg',});parent.appendChild(mainMenu);for(var loopVar=0,len=this.menuList.length;loopVar<len;loopVar++){this.components[loopVar]=this.baseMenu({"id":loopVar,"name":this.menuList[loopVar],"type":this.menuList[loopVar].replace("#","")});mainMenu.appendChild(this.components[loopVar].wrapper);}
currentItem=selectedItem;this.action();};this.getCurrentType=function(){return this.components[selectedItem].getType();};this.getCurrentTheme=function(){return main.menuColorList[this.components[selectedItem].getType()]}
this.enter_focus=function(){main.focusedDom=this;if(this.components[currentItem])
this.components[currentItem].setCursor();};this.leave_focus=function(){if(this.components[currentItem])
this.components[currentItem].removeCursor();};this.KeyboardEvent=function(e,eventType){try{target=main.target(e),keyCode=target.keyCode,key=main.keyCodeDic[keyCode];switch(eventType){case"keydown":switch(key){case"arrowdown":if(this.subMenu&&this.subMenu.isVisible()){this.leave_focus();this.subMenu.enter_focus();}else if(main.grid.components.length>0){this.leave_focus();main.grid.enter_focus();}
return false;case"arrowup":this.leave_focus();main.mainBg.enter_focus();return false;case"ok":if(prevSelected===currentItem)return;selectedItem=currentItem;this.action();return true;case"arrowright":if(this.components[currentItem+1]){this.components[currentItem].removeCursor();this.components[++currentItem].setCursor();}else{this.components[currentItem].removeCursor();currentItem=0;this.components[currentItem].setCursor();}
return true;case"arrowleft":if(this.components[currentItem-1]){this.components[currentItem].removeCursor();this.components[--currentItem].setCursor();}else{this.components[currentItem].removeCursor();currentItem=this.components.length-1;this.components[currentItem].setCursor();}
return true;}
break;}}catch(ex){}};this.subMenu=new main.SubMenuContainer();}catch(err){};};main.SubMenuContainer=function(){try{var currentItem=0;var prevSelected=0;var selectedItem=0;this.menuList=[];this.components=[];var borderColor={"FOODHACKS":"#ae3f2d","RECIPES":"#92702d","PRODUCTS":"#3f8dae"};var prev="";var currentPage=1;this.subMenuLeft=main.createElement('div',{classname:'submenuLeft',id:'submenuLeft',});this.subMenuRight=main.createElement('div',{classname:'submenuRight',id:'submenuRight',});this.baseSubMenu=function(param,param2){var type=param2||"FOODHACKS";var obj={type:type,code:param.code};obj.wrapper=main.createElement('div',{classname:'submenuItem',id:'submenuItem_'+param.id,content:param.name,});obj.hook=main.createElement('div',{classname:'',id:'submenuHook_'+param.id,});obj.wrapper.appendChild(obj.hook);obj.showHook=function(){$(obj.hook).addClass("submenuHook");switch(obj.type){case"PRODUCTS":$(obj.hook).addClass("submenuHookBlue");break;case"FOODHACKS":$(obj.hook).addClass("submenuHookRed");break;case"RECIPES":$(obj.hook).addClass("submenuHookOrange");break;}};obj.removeHook=function(){obj.hook.className="";};obj.setCursor=function(){switch(obj.type){case"PRODUCTS":$(obj.wrapper).addClass("subMenuCursorBlue");break;case"FOODHACKS":$(obj.wrapper).addClass("subMenuCursorRed");break;case"RECIPES":$(obj.wrapper).addClass("subMenuCursorOrange");break;}};obj.removeCursor=function(){switch(obj.type){case"FOODHACKS":$(obj.wrapper).removeClass("subMenuCursorRed");break;case"RECIPES":$(obj.wrapper).removeClass("subMenuCursorOrange");break;case"PRODUCTS":$(obj.wrapper).removeClass("subMenuCursorBlue");break;}};obj.makeSelected=function(){switch(obj.type){case"FOODHACKS":$(obj.wrapper).addClass("submenuSelectedRed");break;case"RECIPES":$(obj.wrapper).addClass("submenuSelectedOrange");break;case"PRODUCTS":$(obj.wrapper).addClass("submenuSelectedBlue");break;}
obj.showHook();};obj.removeSelected=function(){obj.wrapper.className="submenuItem";obj.removeHook();};obj.getCode=function(){return obj.code;};obj.getType=function(){return obj.type;};return obj;};this.create=function(param,type){var data=param||[];if(!main.isDetail)this.free();if(!data||!data.length)return;var parent=document.getElementById('menuSection');var subMenu=main.createElement('div',{classname:'subMenuBg',id:'subMenuBg',});var subMenuBottom=main.createElement('div',{classname:'subMenuBgBottom',id:'subMenuBgBottom',});subMenu.appendChild(subMenuBottom);subMenu.appendChild(this.subMenuLeft);subMenu.appendChild(this.subMenuRight);parent.appendChild(subMenu);for(var loopVar=0,len=data.length;loopVar<len;loopVar++){this.components[loopVar]=this.baseSubMenu({"id":loopVar,"name":data[loopVar],"code":(currentPage==1)?main.subMenuCode[type][loopVar]:main.subMenuCodePg2[type][loopVar]},type);subMenu.appendChild(this.components[loopVar].wrapper);}
this.setColor(type);this.components[this.components.length-1].wrapper.style.borderRight='1px solid '+borderColor[main.menu.getCurrentType()];if(currentPage==1){this.components[selectedItem].makeSelected();this.action();if(main.subMenuDataPg2[main.menu.getCurrentType()]&&main.subMenuDataPg2[main.menu.getCurrentType()].length){this.showRight();}}
currentItem=selectedItem;};this.action=function(){this.components[prevSelected].removeSelected();this.components[selectedItem].makeSelected();prevSelected=selectedItem;main.subCategory=this.components[selectedItem].getCode();main.categoryCode=this.components[selectedItem].getType();this.leave_focus();main.clearGridList();main.getApi();};this.free=function(){$("#subMenuBg").remove();prevSelected=currentItem=selectedItem=0;this.menuList=[];this.components=[];};this.showLeft=function(){this.subMenuLeft.style.display="block";};this.showRight=function(){this.subMenuRight.style.display="block";};this.hideBoth=function(){this.subMenuLeft.style.display="none";this.subMenuRight.style.display="none";}
this.reset=function(){currentPage=1;prev=0;this.hideBoth();};this.isVisible=function(){return $("#subMenuBg").length}
this.setColor=function(param){var type=param||"FOODHACKS";$("#subMenuBg").addClass(main.submenuClassList[type]);};this.enter_focus=function(){main.focusedDom=this;if(this.components[currentItem])
this.components[currentItem].setCursor();};this.leave_focus=function(){if(this.components[currentItem])
this.components[currentItem].removeCursor();};this.KeyboardEvent=function(e,eventType){try{target=main.target(e),keyCode=target.keyCode,key=main.keyCodeDic[keyCode];switch(eventType){case"keydown":switch(key){case"arrowdown":if(main.grid.components.length>0){this.leave_focus();main.grid.enter_focus();}
return false;case"arrowup":this.leave_focus();main.menu.enter_focus();return false;case"ok":if(prevSelected===currentItem)return;selectedItem=currentItem;this.action();return true;case"arrowright":if(this.components[currentItem+1]){this.components[currentItem].removeCursor();this.components[++currentItem].setCursor();}else if(main.subMenuDataPg2[main.menu.getCurrentType()]&&main.subMenuDataPg2[main.menu.getCurrentType()].length&&currentPage!=2){currentPage++;prev=prevSelected;$("#subMenuBg").html("")
currentItem=0;this.create(main.subMenuDataPg2[main.menu.getCurrentType()],main.menu.getCurrentType())
this.enter_focus();this.hideBoth();this.showLeft();}else{this.components[currentItem].removeCursor();currentItem=0
this.components[currentItem].setCursor();}
return true;case"arrowleft":if(this.components[currentItem-1]){this.components[currentItem].removeCursor();this.components[--currentItem].setCursor();}else if(currentPage==2){$("#subMenuBg").html("")
this.create(main.subMenuData[main.menu.getCurrentType()],main.menu.getCurrentType())
currentItem=this.components.length-1;currentPage--;this.enter_focus();this.components[prev].makeSelected();prevSelected=prev;this.hideBoth();this.showRight();}else{this.components[currentItem].removeCursor();currentItem=this.components.length-1;this.components[currentItem].setCursor();}
return true;}
break;}}catch(ex){}};}catch(err){};};main.clearGridList=function(){main.grid.resetGridValues();if(main.isAvailable('gridSection')){main.grid.free();}
if(main.isAvailable('arrowSection')){main.arrow.free();}
if(main.isAvailable('pageSection')){main.page.free();}};main.locationDropdown=function(){var currentItem=0;this.components=[];this.node="";this.selected="";this.fromDetail=false;this.initial=false;this.locationString={};this.locationCode={},this.dropdownClass=function(param){try{var dropDownId=param.id||0;var dropDownText=param.text||"";var obj=null;obj={"outerDrop":main.createElement('div',{classname:'outerDropDown',id:'outerDropDown_'+dropDownId,}),"borderDiv":main.createElement('div',{classname:'locationDrop',id:'locationDrop_'+dropDownId,content:dropDownText}),"tickDiv":main.createElement('img',{classname:'locationTick',id:'locationTick_'+dropDownId,})};obj.outerDrop.appendChild(obj.borderDiv);obj.outerDrop.appendChild(obj.tickDiv);obj.tickDiv.className="locationTick normalTick";return obj;}catch(e){}};this.createLocationDropdown=function(){try{locationTxt.innerHTML="LOCATION";var width=$("#locationTxt").width();$("#locationKey").css('width',width);var left=72-(width/2);$("#locationTxt").css('left',left);if(main.isAvailable('locationCnt')){document.getElementById('locationCnt').innerHTML="";}else{var locationCnt=main.createElement('div',{classname:'locationCnt',id:'locationCnt',});var logoBase=document.getElementById('headerBg_0');logoBase.appendChild(locationCnt);}
$("#locationCnt").addClass('dropDownBorder');this.node=document.getElementById('locationCnt');var arrayLength=main.locationData.Result.length;var innerLoop=0,othersVar=0,othersAvailable=false;for(var loopVar=0;loopVar<arrayLength;loopVar++){if(main.locationData.Result[loopVar].CountryString!="Others"){this.locationString[innerLoop]=main.locationData.Result[loopVar].CountryString;this.locationCode[innerLoop]=main.locationData.Result[loopVar].Code;innerLoop++;}else{othersAvailable=true;othersVar=loopVar;}}
if(othersAvailable){this.locationString[arrayLength-1]=main.locationData.Result[othersVar].CountryString;this.locationCode[arrayLength-1]=main.locationData.Result[othersVar].Code;}
for(var loopVar=0;loopVar<arrayLength;loopVar++){this.components[loopVar]=(this.dropdownClass({id:loopVar,text:this.locationString[loopVar]}));if(main.localCode==this.locationCode[loopVar]){this.selected=loopVar;}
this.node.appendChild(this.components[loopVar].outerDrop);}
if(this.components.length>3){$('#locationCnt').css('overflow-y','scroll');}
currentItem=this.selected;var selected="outerDropDown_"+this.selected;var tickselected="locationTick_"+this.selected;$("#"+selected).addClass('dropdownSelected');$("#"+tickselected).addClass('show');this.enter_focus();}catch(e){}};this.setCursor=function(){if(this.initial){this.initial=false;if(this.components.length>3&&currentItem>2){$('.locationCnt').animate({scrollTop:50*(currentItem-1)},0);}}
if(currentItem==this.selected){$("#outerDropDown_"+currentItem).removeClass('dropdownSelected');}
$("#outerDropDown_"+currentItem).addClass('dropdownCursor');$("#outerDropDown_"+currentItem).addClass('dropdownCursor');$("#locationTick_"+currentItem).addClass('cursorTick');$("#locationTick_"+currentItem).removeClass('normalTick');$("#locationBg").removeClass('locationShadow');$("#locationBg").addClass('locationShadowRemoved');};this.removeCursor=function(){if(currentItem==this.selected){$("#outerDropDown_"+currentItem).addClass('dropdownSelected');}
$("#outerDropDown_"+currentItem).removeClass('dropdownCursor');$("#locationBg").addClass('locationShadow');$("#locationBg").removeClass('locationShadowRemoved');$("#locationTick_"+currentItem).addClass('normalTick');$("#locationTick_"+currentItem).removeClass('cursorTick');};this.enter_focus=function(){main.focusedDom=this;this.initial=true;this.setCursor();};this.leave_focus=function(){this.removeCursor();};this.setHotKeyWidth=function(){var location=(this.components[this.selected].borderDiv.innerHTML);location=location.toUpperCase();locationTxt.innerHTML=location;var width=$("#locationTxt").width();$("#locationKey").css('width',width);var left=72-(width/2);$("#locationTxt").css('left',left);}
this.close=function(){this.setHotKeyWidth();this.leave_focus();this.free();if(main.fromBlueKey){main.fromBlueKey=false;if(main.isDetail){if(detail.oldCursor==main.mainBg){}
detail.oldCursor.enter_focus();detail.oldCursor="";}else{main.oldCursor.enter_focus();}}else{main.mainBg.enter_focus();}};this.free=function(){$("#locationCnt").removeClass('dropDownBorder');document.getElementById('locationCnt').innerHTML="";}
this.updateLocationData=function(){main.mainBg.leave_focus();main.fromSearch=false;locationTxt.innerHTML="";this.setHotKeyWidth();main.localCode=this.locationCode[this.selected];main.locationPopup.setCookie('location',main.localCode);main.setSelectedCountry();main.categoryCode="FEATURED";if(main.isDetail){clearInterval(detail.timer);innerSection.innerHTML="";main.isDetail=false;this.fromDetail=true;main.createInnerSection();}else{main.clearGridList();menuSection.innerHTML="";main.menuInitiate();}
main.keyboardContainer.textboxValue='';main.keyboardContainer.radioSelected='MostRecent';}
this.KeyboardEvent=function(e,eventType){try{var target=main.target(e),keyCode=target.keyCode,key=main.keyCodeDic[keyCode];switch(eventType){case"keydown":switch(key){case"arrowup":if(currentItem==0){main.fromBlueKey=false;main.mainBg.currentItem=1;this.close();if(main.isDetail){detail.descObj.startScrollText();}}else{this.removeCursor();currentItem--;if(this.components.length>3&&currentItem>1){$('.locationCnt').animate({scrollTop:50*(currentItem-2)},0);}
this.setCursor();}
break;case"arrowdown":if(currentItem!=(this.components.length-1)){this.removeCursor();currentItem++;if(this.components.length>3&&currentItem>2){$('.locationCnt').animate({scrollTop:50*(currentItem-2)},0);}
this.setCursor();}
break;case"ok":if(currentItem!=this.selected){this.selected=currentItem;this.close();this.updateLocationData();}
break;case"return":e.preventDefault();if(main.isDetail){detail.descObj.startScrollText();}
this.close();break;default:return false;}
return true;}
return true;}catch(e){}};};main.createListing=function(){this.currentItem=0;this.components=[];this.createHeader=function(){var topSection=document.getElementById('topSection');for(var loopVar=0;loopVar<1;loopVar++){var headerbg=main.createElement('div',{classname:'headerBg_'+loopVar,id:'headerBg_'+loopVar,});topSection.appendChild(headerbg);}
this.createHtml();};this.createButton=function(param){var key=param.key||"";var keyIcon=key+'Icon';var keyTxt=key+'Txt';var keyColor=key+'Key';keyIcon=main.createElement('div',{classname:key+'Icon',id:key+'Icon',});keyTxt=main.createElement('div',{classname:key+'Txt',id:key+'Txt',content:key.toUpperCase()});keyColor=main.createElement('div',{classname:key+'Key',id:key+'Key',});return{icon:keyIcon,text:keyTxt,color:keyColor};};this.createLogo=function(param){var color=param.color||"";var imgLogo=main.createElement('img',{classname:'logo'+color,id:'logo'+color,src:'images/panasonic_logo_'+color+'.png'});return imgLogo;};this.createDiv=function(param){var divLabel=param.text||"";var divCnt=main.createElement('div',{classname:divLabel+'Bg',id:divLabel+'Bg',});return divCnt;}
this.createHtml=function(){try{var logoBase=document.getElementById('headerBg_0');logoBase.appendChild(this.createDiv({text:'logoRed'}));var logoBgRed=document.getElementById('logoRedBg');logoBgRed.appendChild(this.createLogo({color:'Red'}));logoBase.appendChild(this.createDiv({text:'search'}));var searchBase=document.getElementById('searchBg');$("#searchBg").addClass('defaultBorder');var search=this.createButton({key:'search'});var searchIcon=search.icon;var searchTxt=search.text;var searchKey=search.color;searchBase.appendChild(searchTxt);searchBase.appendChild(searchKey);searchBase.appendChild(searchIcon);$('#searchIcon').addClass('hotKeyIcon');$('#searchIcon').addClass('hotKeyBgNormal');var searchImg=main.createElement('div',{classname:'searchImg',id:'searchImg',});searchBase.appendChild(searchImg);$("#searchImg").addClass('searchImgNormal');logoBase.appendChild(this.createDiv({text:'location'}));var locationBase=document.getElementById('locationBg');$("#locationBg").addClass('defaultBorder');$("#locationBg").addClass('locationShadow');var location=this.createButton({key:'location'});var locationIcon=location.icon;var locationTxt=location.text;var locationKey=location.color;var locationDiv=main.createElement('div',{classname:'locationInnerBg',id:'locationInnerBg',});locationBase.appendChild(locationDiv);var locationInnerDiv=document.getElementById('locationInnerBg');locationInnerDiv.appendChild(locationTxt);locationInnerDiv.appendChild(locationKey);locationBase.appendChild(locationIcon);$('#locationIcon').addClass('hotKeyIcon');$('#locationIcon').addClass('hotKeyBgNormal');var locationImg=main.createElement('div',{classname:'locationImg',id:'locationImg',});locationBase.appendChild(locationImg);$("#locationImg").addClass('locationImgNormal');locationTxt.innerHTML=main.selectedCountry;var width=$("#locationTxt").width();$("#locationKey").css('width',width);var left=72-(width/2);$("#locationTxt").css('left',left);logoBase.appendChild(this.createDiv({text:'logoWhite'}));var logoBgWhite=document.getElementById('logoWhiteBg');logoBgWhite.appendChild(this.createLogo({color:'White'}));}catch(e){}};this.setCursor=function(){if(this.currentItem===0){$("#searchBg").removeClass('defaultBorder');$("#searchBg").addClass('cursorBorder');$("#searchBg").addClass('scaleUp');$('#searchIcon').removeClass('hotKeyBgNormal');$('#searchIcon').addClass('hotKeyBgCursor');$("#searchImg").removeClass('searchImgNormal');$("#searchImg").addClass('searchImgCursor');}else{$("#locationBg").addClass('scaleUp');$("#locationBg").removeClass('defaultBorder');$("#locationBg").addClass('cursorBorder');$('#locationIcon').removeClass('hotKeyBgNormal');$('#locationIcon').addClass('hotKeyBgCursor');$("#locationImg").removeClass('locationImgNormal');$("#locationImg").addClass('locationImgCursor');}}
this.removeCursor=function(){if(this.currentItem===0){$("#searchBg").removeClass('scaleUp');$("#searchBg").removeClass('cursorBorder');$("#searchBg").addClass('defaultBorder');$('#searchIcon').addClass('hotKeyBgNormal');$('#searchIcon').removeClass('hotKeyBgCursor');$("#searchImg").addClass('searchImgNormal');$("#searchImg").removeClass('searchImgCursor');}else{$("#locationBg").removeClass('scaleUp');$("#locationBg").removeClass('cursorBorder');$("#locationBg").addClass('defaultBorder');$('#locationIcon').removeClass('hotKeyBgCursor');$('#locationIcon').addClass('hotKeyBgNormal');$("#locationImg").addClass('locationImgNormal');$("#locationImg").removeClass('locationImgCursor');}};this.enter_focus=function(){main.focusedDom=this;this.setCursor();};this.leave_focus=function(){this.removeCursor();};this.free=function(){if(main.isAvailable('topSection')){topSection.innerHTML="";}};this.KeyboardEvent=function(e,eventType){try{var target=main.target(e),keyCode=target.keyCode,key=main.keyCodeDic[keyCode];switch(eventType){case"keydown":switch(key){case"arrowdown":if(main.isDetail){detail.prevCursor.enter_focus();this.leave_focus();}else if(!main.fromSearch){main.menu.enter_focus();this.leave_focus();}else if(main.fromSearch&&main.grid.components.length>0){main.grid.enter_focus();this.leave_focus();}
break;case"ok":if(main.isDetail){detail.descObj.stopScrollText();}
if(this.currentItem===0){main.fromYellowKey=true;main.keyboardContainer.animTop();}else{if(!main.fromYellowKey){main.fromBlueKey=true;if(main.isDetail){detail.oldCursor=main.focusedDom;}else{main.oldCursor=main.focusedDom;}
this.leave_focus();main.locDropdown.createLocationDropdown();}}
break;case"arrowright":if(this.currentItem===0){this.removeCursor();this.currentItem=1;this.setCursor();}
break;case"arrowleft":if(this.currentItem===1){this.removeCursor();this.currentItem=0;this.setCursor();}
break;default:return false;}
return true;}
return true;}catch(e){}};this.createHeader();};main.createPageSection=function(){this.createPage=function(){var parent=document.getElementById("contentSection");var pageSection=main.createElement('div',{classname:'pageSection',id:'pageSection'});parent.appendChild(pageSection);var pageDisplay=main.createElement('div',{classname:'pageDisplay',id:'pageDisplay',});var currentPage=main.createElement('div',{classname:'currentPage',id:'currentPage',content:''});var totalPage=main.createElement('div',{classname:'totalPage',id:'totalPage',content:''});var pageSec=document.getElementById('pageSection');pageSec.appendChild(pageDisplay);var pageBg=document.getElementById('pageDisplay');pageBg.appendChild(currentPage);pageBg.appendChild(totalPage);};this.setCurrentPage=function(param){document.getElementById('currentPage').innerHTML=param;};this.setTotalPage=function(param){document.getElementById('totalPage').innerHTML=param;};this.show=function(){$("#pageDisplay").addClass('show');};this.hide=function(){$("#pageDisplay").removeClass('show');};this.free=function(){if(main.isAvailable('pageSection')){$("#pageSection").remove();}}}
main.createArrowSection=function(){this.components=[];this.createArrow=function(){var arrowSection=main.createElement('div',{classname:'arrowSection',id:'arrowSection'});var parent=document.getElementById("contentSection");parent.appendChild(arrowSection);var rightArrow=main.createElement('div',{classname:'rightArrow',id:'rightArrow'});var leftArrow=main.createElement('div',{classname:'leftArrow',id:'leftArrow'});var arrowBg=document.getElementById('arrowSection');arrowBg.appendChild(rightArrow);arrowBg.appendChild(leftArrow);$("#rightArrow").addClass('disabledRight');$("#leftArrow").addClass('disabledLeft');};this.disabled=function(){if(main.categoryCode=="RECIPES"){$("#"+param).removeClass('recipeArrow');}else if(main.categoryCode=="FOODHACKS"){$("#"+param).removeClass('foodHacksArrow');}else if(main.categoryCode=="PRODUCTS"){$("#"+param).removeClass('productsArrow');}else if(main.categoryCode=="GALLERY"||main.categoryCode=="FOOD DIARY"){$("#"+param).removeClass('galleryArrow');}else{$("#"+param).addClass('defaultArrow');}
$("#"+param).addClass('disabledArrow');if(param=="leftArrow"){$("#"+param).addClass('disabledLeft');$("#"+param).removeClass('enabledLeft');}else if(param=="rightArrow"){$("#"+param).addClass('disabledRight');$("#"+param).removeClass('enabledRight');}}
this.enabled=function(param){$("#"+param).removeClass('disabledArrow');if(main.categoryCode=="RECIPES"){$("#"+param).addClass('recipeArrow');}else if(main.categoryCode=="FOODHACKS"){$("#"+param).addClass('foodHacksArrow');}else if(main.categoryCode=="PRODUCTS"){$("#"+param).addClass('productsArrow');}else if(main.categoryCode=="GALLERY"||main.categoryCode=="FOOD DIARY"){$("#"+param).addClass('galleryArrow');}else{$("#"+param).addClass('defaultArrow');}
if(param=="leftArrow"){$("#"+param).removeClass('disabledLeft');$("#"+param).addClass('enabledLeft');}else if(param=="rightArrow"){$("#"+param).removeClass('disabledRight');$("#"+param).addClass('enabledRight');}}
this.show=function(){$("#arrowSection").addClass('show');$("#leftArrow").addClass('disabledArrow');$("#leftArrow").addClass('disabledLeft');$("#rightArrow").addClass('disabledArrow');$("#rightArrow").addClass('disabledRight');};this.hide=function(){$("#arrowSection").removeClass('show');};this.free=function(){if(main.isAvailable('arrowSection')){$("#arrowSection").remove();}};};main.createGridSection=function(){try{this.components=[];this.pageNumber=0;this.displayPage=0;this.items=3;this.apiCall=0;this.totalPage=0;this.currentItem=0;this.apiNav="";this.tempPage=0;this.gridClass=function(param){try{var gridId=param.id||0;var gridTitle=param.title||"";var category=param.category||"";var author=param.author||"";var gridImg=param.src||"";var likeCount=param.likeCount||0;var isVideo=param.isVideo||false;var obj=null;obj={"borderDiv":main.createElement('div',{classname:'borderDiv',id:'borderDiv_'+gridId}),"outerDiv":main.createElement('div',{classname:'outerDiv',id:'outerDiv_'+gridId}),"topDiv":main.createElement('div',{classname:'topDiv',id:'topDiv_'+gridId}),"catImg":main.createElement('div',{classname:'catImg',id:'catImg_'+gridId}),"catLabel":main.createElement('div',{classname:'catLabel',id:'catLabel_'+gridId,content:category}),"titleDiv":main.createElement('div',{classname:'titleDiv',id:'titleDiv_'+gridId,content:gridTitle}),"authorLabel":main.createElement('div',{classname:'authorLabel',id:'authorLabel_'+gridId,content:"POSTED BY"}),"authorDiv":main.createElement('div',{classname:'authorDiv',id:'authorDiv_'+gridId,content:author}),"gridImgDiv":main.createElement('div',{classname:'gridImgDiv',id:'gridImgDiv_'+gridId,}),"loadingTxt":main.createElement('div',{classname:'loadingTxt',id:'loadingTxt'+gridId,content:'LOADING...'}),"gridImg":main.createElement('img',{classname:'gridImg',id:'gridImg_'+gridId,src:gridImg}),"overLay":main.createElement('div',{classname:'overLay',id:'overLay_'+gridId,}),"overLayTxt":main.createElement('div',{classname:'overLayTxt',id:'overLayTxt_'+gridId,content:"Press OK to view details"}),"bottomDiv":main.createElement('div',{classname:'bottomDiv',id:'bottomDiv_'+gridId,}),"videoImgDiv":main.createElement('div',{classname:'videoImgDiv',id:'videoImgDiv_'+gridId,}),"videoImg":main.createElement('img',{classname:'videoImg',id:'videoImg_'+gridId,src:"images/video_icon.png",}),"likeDiv":main.createElement('div',{classname:'likeDiv',id:'likeDiv_'+gridId,content:likeCount+" PEOPLE LIKE IT"}),};obj.borderDiv.appendChild(obj.outerDiv);obj.outerDiv.appendChild(obj.topDiv);obj.topDiv.appendChild(obj.catImg);obj.topDiv.appendChild(obj.catLabel);obj.outerDiv.appendChild(obj.titleDiv);obj.outerDiv.appendChild(obj.authorLabel);obj.outerDiv.appendChild(obj.authorDiv);obj.outerDiv.appendChild(obj.gridImgDiv);obj.gridImgDiv.appendChild(obj.loadingTxt);obj.gridImgDiv.appendChild(obj.gridImg);obj.outerDiv.appendChild(obj.overLay);obj.outerDiv.appendChild(obj.overLayTxt);obj.outerDiv.appendChild(obj.bottomDiv);if(isVideo){obj.bottomDiv.appendChild(obj.videoImgDiv);obj.videoImgDiv.appendChild(obj.videoImg);}
obj.bottomDiv.appendChild(obj.likeDiv);obj.gridImg.onload=function(){obj.loadingTxt.innerHTML="";this.className+=' gridImgUp';}
obj.gridImg.onerror=function(){obj.loadingTxt.innerHTML="";this.className+=' gridImgUp';this.src="images/default_image.png";};return obj;}catch(e){}};this.resetGridValues=function(){this.pageNumber=0;this.displayPage=0;this.apiCall=0;this.totalPage=0;this.currentItem=0;this.apiNav="";};this.gridMask=function(){var mask=main.createElement('div',{classname:'gridMask',id:'gridMask'});var parent=document.getElementById("contentSection");parent.appendChild(mask);parent.insertBefore(mask,arrowSection);if(main.categoryCode=="FEATURED"||main.categoryCode=="GALLERY"){$("#gridMask").addClass('gridMaskNormal');}else{$("#gridMask").addClass('gridMaskSub');}};this.hideGridMask=function(){$("#gridMask").remove();}
this.createGrid=function(){try{var parent=document.getElementById("contentSection");var count=3;this.components=[];if(main.isAvailable('gridSection')){gridSection.innerHTML="";main.arrow.free();main.page.free();}else{this.node=main.createElement('div',{classname:'gridSection',id:'gridSection'});}
main.arrow.createArrow();main.page.createPage();parent.appendChild(this.node);main.arrow.show();main.page.show();if(main.listingData.Result.length-((this.pageNumber)*this.items)<this.items){count=main.listingData.Result.length-((this.pageNumber)*this.items);}
this.displayPage=(this.apiCall*(main.totalFired/this.items))+(this.pageNumber+1);this.totalPage=parseInt(main.listingData.Paging.TotalItems/this.items)+((main.listingData.Paging.TotalItems%this.items)===0?0:1);if(main.limitPage&&this.totalPage>(main.totalFired/this.items)){this.totalPage=(main.totalFired/this.items);}
main.page.setCurrentPage(this.displayPage);main.page.setTotalPage(this.totalPage);var tempCount=(this.apiCall*main.totalFired)+(this.pageNumber*this.items)+count;if(main.limitPage){if(tempCount<main.listingData.Result.length){main.arrow.enabled("leftArrow");}}else{if(tempCount<main.listingData.Paging.TotalItems){main.arrow.enabled("leftArrow");}}
if(tempCount>this.items){main.arrow.enabled("rightArrow");}
if(this.totalPage==1){main.page.hide();}
if(main.categoryCode=="FEATURED"||main.categoryCode=="GALLERY"){$('#contentSection').css("padding-top","32px");$('#pageSection').css("margin-top","27px");}else{$('#contentSection').css("padding-top","0");$('#pageSection').css("margin-bottom","0");$('#gridSection').css("top","20px");}
for(var loopVar=0;loopVar<count;loopVar++){var tempVar,contentType,gridTitle,gridImg,isVideo=false;tempVar=(this.pageNumber*this.items)+loopVar;contentType=main.listingData.Result[tempVar].ContentType?(main.listingData.Result[tempVar].ContentType!=""?main.listingData.Result[tempVar].ContentType.toUpperCase():""):"";gridTitle=main.listingData.Result[tempVar].Title?(main.listingData.Result[tempVar].Title!=""?main.listingData.Result[tempVar].Title.toUpperCase():""):"";gridImg=main.listingData.Result[tempVar].Medias?(main.listingData.Result[tempVar].Medias[0].SmallPictureUri?(main.listingData.Result[tempVar].Medias[0].SmallPictureUri!=""?(main.listingData.Result[tempVar].Medias[0].SmallPictureUri):("images/default_image.png")):("images/default_image.png")):(main.listingData.Result[tempVar].Media?(main.listingData.Result[tempVar].Media.SmallPictureUri?(main.listingData.Result[tempVar].Media.SmallPictureUri!=""?(main.listingData.Result[tempVar].Media.SmallPictureUri):("images/default_image.png")):("images/default_image.png")):"images/default_image.png");if(gridImg=="images/default_image.png"){if(main.listingData.Result[tempVar].Medias&&main.listingData.Result[tempVar].Medias[0].YoutubeVideoThumbnailUri&&main.listingData.Result[tempVar].Medias[0].YoutubeVideoThumbnailUri!=null){gridImg=main.listingData.Result[tempVar].Medias[0].YoutubeVideoThumbnailUri;}}
if(main.listingData.Result[tempVar].Medias){for(var innerLoop=0;innerLoop<main.listingData.Result[tempVar].Medias.length;innerLoop++){if(main.listingData.Result[tempVar].Medias[innerLoop].YoutubeVideoId!=null){isVideo=true;break;}}}
if(contentType=="RECIPE"){contentType="RECIPES";}else if(contentType=="FOODHACK"){contentType="FOODHACKS";}else if(contentType=="PRODUCT"){contentType="PRODUCTS";}else if(contentType=="GALLERY"&&main.selectedCountry=="MALAYSIA"){contentType="FOOD DIARY";}
this.components[loopVar]=(this.gridClass({id:loopVar,category:contentType,title:main.setOmitter(gridTitle,80,495,24,true),author:main.listingData.Result[tempVar].Owner.Name?(main.listingData.Result[tempVar].Owner.Name!=""?main.listingData.Result[tempVar].Owner.Name.toUpperCase():"-"):"-",src:gridImg,likeCount:(main.listingData.Result[tempVar].FavouriteCount&&main.listingData.Result[tempVar].FavouriteCount!="")?main.listingData.Result[tempVar].FavouriteCount:"",isVideo:isVideo}));this.node.appendChild(this.components[loopVar].borderDiv);main.mainBg.leave_focus();if(contentType=="RECIPES"){$("#borderDiv_"+loopVar).addClass('recipeDiv');$("#catImg_"+loopVar).addClass('recipeIcon');}else if(contentType=="FOODHACKS"){$("#borderDiv_"+loopVar).addClass('foodHacksDiv');$("#catImg_"+loopVar).addClass('foodHackIcon');}else if(contentType=="PRODUCTS"){$("#borderDiv_"+loopVar).addClass('productsDiv');$("#catImg_"+loopVar).addClass('productIcon');}else if(contentType=="GALLERY"||contentType=="FOOD DIARY"){$("#borderDiv_"+loopVar).addClass('galleryDiv');$("#catImg_"+loopVar).addClass('galleryIcon');}else{$("#borderDiv_"+loopVar).addClass('defaultDiv');$("#catImg_"+loopVar).addClass('defaultIcon');}
this.enter_focus();};}catch(e){}};this.setCursor=function(){$("#borderDiv_"+this.currentItem).addClass('onCursorBorder');$("#overLay_"+this.currentItem).addClass('overLayCursor');$("#overLayTxt_"+this.currentItem).addClass('overLayCursor');var tempCat=document.getElementById('catLabel_'+this.currentItem).innerHTML;if(tempCat=="RECIPES"){$("#borderDiv_"+this.currentItem).addClass('recipeCursor');}else if(tempCat=="FOODHACKS"){$("#borderDiv_"+this.currentItem).addClass('foodHacksCursor');}else if(tempCat=="PRODUCTS"){$("#borderDiv_"+this.currentItem).addClass('productsCursor');}else if(tempCat=="GALLERY"){$("#borderDiv_"+this.currentItem).addClass('galleryCursor');}else{$("#borderDiv_"+this.currentItem).addClass('defaultCursor');}};this.removeCursor=function(){$("#borderDiv_"+this.currentItem).removeClass('onCursorBorder');$("#overLay_"+this.currentItem).removeClass('overLayCursor');$("#overLayTxt_"+this.currentItem).removeClass('overLayCursor');var tempCat=document.getElementById('catLabel_'+this.currentItem).innerHTML;if(tempCat=="RECIPES"){$("#borderDiv_"+this.currentItem).removeClass('recipeCursor');}else if(tempCat=="FOODHACKS"){$("#borderDiv_"+this.currentItem).removeClass('foodHacksCursor');}else if(tempCat=="PRODUCTS"){$("#borderDiv_"+this.currentItem).removeClass('productsCursor');}else if(tempCat=="GALLERY"){$("#borderDiv_"+this.currentItem).removeClass('galleryCursor');}else{$("#borderDiv_"+this.currentItem).removeClass('defaultCursor');}};this.enter_focus=function(){main.focusedDom=this;if(this.components[this.currentItem]){this.setCursor();}};this.leave_focus=function(){if(this.components[this.currentItem]){this.removeCursor();}};this.onGridError=function(){this.currentItem=main.currentItem;main.pageNumber=0;this.pageNumber=this.tempPage;this.tempPage=0;if(this.apiNav=="right"){this.apiCall=this.apiCall-1;}else if(this.apiNav=="left"){this.apiCall=this.apiCall+1;}}
this.gridRightNavigation=function(){try{this.apiNav="";if(this.components[this.currentItem+1]){this.removeCursor();this.currentItem++;this.setCursor();}else{var temp=(this.pageNumber*this.items)+this.currentItem;var tempApi=(this.apiCall*main.totalFired)+(this.pageNumber*this.items)+this.currentItem;if(temp<(main.listingData.Result.length-1)){this.pageNumber=this.pageNumber+1;this.leave_focus();this.currentItem=0;main.arrow.hide();main.page.hide();this.createGrid();}else if(!main.limitPage&&tempApi<(main.listingData.Paging.TotalItems-1)){main.recipeCode=main.listingData.Result[temp].UniqueKey;this.tempPage=this.pageNumber;this.pageNumber=0;this.apiNav="right";this.apiCall=this.apiCall+1;this.leave_focus();main.currentItem=this.currentItem;this.currentItem=0;this.gridMask();main.getApi("next");}}}catch(e){}};this.gridLeftNavigation=function(){this.apiNav="";if(this.components[this.currentItem-1]){this.removeCursor();this.currentItem--;this.setCursor();}else{var temp=(this.pageNumber*this.items)+this.currentItem;var tempApi=(this.apiCall*main.totalFired)+(this.pageNumber*this.items)+this.currentItem;if(temp!=0){this.pageNumber=this.pageNumber-1;this.leave_focus();this.currentItem=2;main.arrow.hide();main.page.hide();this.createGrid();}else if(tempApi!=0){main.recipeCode=main.listingData.Result[0].UniqueKey;this.tempPage=this.pageNumber;this.pageNumber=(main.totalFired/this.items)-1;this.leave_focus();this.apiNav="left";this.apiCall=this.apiCall-1;main.currentItem=this.currentItem;this.currentItem=2;this.gridMask();main.getApi("prev");}}};this.getTheme=function(){return $("#borderDiv_"+this.currentItem).css("color")}
this.KeyboardEvent=function(e,eventType){try{var target=main.target(e),keyCode=target.keyCode,key=main.keyCodeDic[keyCode];switch(eventType){case"keydown":switch(key){case"arrowup":this.leave_focus();if(main.categoryCode=="Search"){main.mainBg.enter_focus();}else{if(main.menu.subMenu&&main.menu.subMenu.isVisible()){main.menu.subMenu.enter_focus();}else{main.menu.enter_focus();}}
break;case"arrowdown":break;case"ok":main.selectedGrid=(this.pageNumber*this.items)+this.currentItem;main.isDetail=true;main.currentItem=this.currentItem;main.pageNumber=this.pageNumber;main.theme=this.getTheme();main.gridApiCall=this.apiCall;detail.createDetailPage($("#catLabel_"+this.currentItem).html());break;case"arrowright":this.gridRightNavigation();break;case"arrowleft":this.gridLeftNavigation();break;default:return false;}
return true;}
return true;}catch(e){}};this.free=function(){$('#pageSection').css("margin-top","0");$('#contentSection').css("padding-top","0");if(main.isAvailable('gridSection')){gridSection.innerHTML="";this.components=[];}};}catch(e){}};main.getGridList=function(baseUrl,paramUrl){var paramUrl=paramUrl;var errorMsg;if(main.categoryCode=="FEATURED"){errorMsg="No featured data available.";}else if(main.categoryCode=="FOODHACKS"){errorMsg="No foodhacks available.";}else if(main.categoryCode=="RECIPES"){errorMsg="No recipes available.";}else if(main.categoryCode=="PRODUCTS"){errorMsg="No products available.";}else if(main.categoryCode=="GALLERY"||main.categoryCode=="FOOD DIARY"){errorMsg="No gallery available.";}else if(main.categoryCode=="Search"){errorMsg="WE CANNOT FIND ANY #FOODHACKS/RECIPES MATCHING \'"+main.searchKey+"\'.";}
errorPopUp.isVisible?errorPopUp.hide():"";main.loading.On();var URL=main.generateUrl(baseUrl,paramUrl);try{$.ajax({type:"POST",url:URL,dataType:"json",timeout:30000,success:function(data){main.loading.Off();try{var data=main.getData(data);if(data&&data.StatusCode&&data.StatusCode==100){if(data.Result&&data.Result.length!=0){main.listingData="";main.listingData=data;if(main.isAvailable("gridMask")){main.grid.hideGridMask();}
main.grid.createGrid();}else{errorPopUp.show(errorMsg);main.grid.onGridError();if(main.categoryCode=="Search"){main.search.resetKeyboardInfo();main.mainBg.enter_focus();}else{main.menu.enter_focus();}
main.isDetail=false;}}else{errorPopUp.show(errorMsg);main.grid.onGridError();if(main.categoryCode=="Search"){main.search.resetKeyboardInfo();main.mainBg.enter_focus();}else{main.menu.enter_focus();}
main.isDetail=false;}}catch(e){errorPopUp.show(errorMsg);main.grid.onGridError();if(main.categoryCode=="Search"){main.search.resetKeyboardInfo();main.mainBg.enter_focus();}else{main.menu.enter_focus();}
main.isDetail=false;}},error:function(jqXHR,textStatus,errorThrown){main.loading.Off();errorPopUp.show("NETWORK CONNECTION FAILURE.");main.grid.onGridError();if(main.categoryCode=="Search"){main.search.resetKeyboardInfo();main.mainBg.enter_focus();}else{main.menu.enter_focus();}
main.isDetail=false;}});}catch(e){main.loading.Off();errorPopUp.show(errorMsg);main.grid.onGridError();if(main.categoryCode=="Search"){main.search.resetKeyboardInfo();main.mainBg.enter_focus();}else{main.menu.enter_focus();}}};main.getApi=function(param){var code=main.categoryCode;var param=param||"";var baseUrl;var paramUrl="&subcategory="+main.subCategory+"&limit="+main.totalFired;switch(code){case"FEATURED":baseUrl=main.baseUrl+main.api.featured;paramUrl="&limit="+main.totalFired;break;case"FOODHACKS":baseUrl=main.baseUrl+main.api.foodhacks;break;case"RECIPES":baseUrl=main.baseUrl+main.api.recipe;break;case"PRODUCTS":baseUrl=main.baseUrl+main.api.products;break;case"GALLERY":baseUrl=main.baseUrl+main.api.gallery;break;case"Search":baseUrl=main.baseUrl+main.api.search;paramUrl="&keywords="+encodeURIComponent(main.searchKey)+"&limit="+main.totalFired+"&orderBy="+main.filter;break;}
if(main.isDetail){main.grid.currentItem=main.currentItem;main.grid.pageNumber=main.pageNumber;main.grid.apiCall=main.gridApiCall;main.isDetail=false;if(main.isAvailable("gridMask")){main.grid.hideGridMask();}
main.grid.createGrid();}else{if(param){if(param=="next"){paramUrl=paramUrl+"&next="+main.recipeCode;}else if(param=="prev"){paramUrl=paramUrl+"&prev="+main.recipeCode;}}
main.getGridList(baseUrl,paramUrl)}};main.createInnerSection=function(){var innerTopSection="<section id=menuSection class = menuSection></section>"+"<section id=contentSection class = contentSection></section>";innerSection.innerHTML=innerTopSection;if(main.locDropdown.fromDetail||main.fromSearch){main.locDropdown.fromDetail=false;main.initiate();}else{main.show();}};main.initiate=function(){try{main.grid=new main.createGridSection();main.arrow=new main.createArrowSection();main.page=new main.createPageSection();main.locDropdown=new main.locationDropdown();main.search=new main.searchBase();if(main.fromSearch){main.getApi();main.search.create_searchHeading();}else{main.getSubMenu("https://cooking.panasonic.asia/api/CategoryApi/GetCategories/");main.menuInitiate();}}catch(e){}};main.menuInitiate=function(){main.menu=new main.MenuContainer();main.menu.create(main.localCode);}
main.show=function(){main.menu.create(main.localCode);};main.setSelectedCountry=function(){for(var loopVar=0;loopVar<main.locationData.Result.length;loopVar++){if(main.locationData.Result[loopVar].Code==main.localCode){main.selectedCountry=main.locationData.Result[loopVar].CountryString.toUpperCase();}}};main.locationPopup=(function($,window,document,main,locationPopup){"use strict";var locationPopup={isVisible:false},dropdown={},focusDom;focusDom={focusInDom:'',components:[],dropDownfocus:'',dropDownselected:'',dropDownIndex:2,focusIndex:0};function getCookie(cname){var name=cname+"=",ca=document.cookie.split(';'),cookie,c;for(cookie=0;cookie<ca.length;cookie++){c=ca[cookie].trim();if(c.indexOf(name)===0){return c.substring(name.length,c.length);}}
return"";}
locationPopup.setCookie=function(c_name,c_value){var d=new Date(),expires;d.setTime(d.getTime()+(365*24*60*60*1000));expires="expires="+d.toGMTString();document.cookie=c_name+"="+c_value+"; "+expires;}
function free(){var obj=document.getElementById('locationPopup');obj.innerHTML='';obj.parentNode.removeChild(obj);}
function redirectListingscreen(){main.localCode=focusDom.components[focusDom.dropDownIndex].id;if($('#dropLabel').text()!=='SELECT LOCATION'){main.setSelectedCountry();locationPopup.setCookie('location',main.localCode);free();locationPopup.isVisible=false;main.mainBg=new main.createListing();main.initiate();}else{$("#location_error").fadeIn();setfocusTodropDown();}}
function setfocusTodropDown(){focusDom.focusIndex--;$("#circle").removeClass('go_focus').addClass('go_nonfocus');$("#go_label").removeClass('buttonLabelfocus').addClass('buttonLabelnonfocus');$("#arrow_box").removeClass('dropdown_rect').addClass('dropdown_rect_selected');$("#arrow").removeClass('arrow_unselected').addClass('arrow_selected');$("#dropLabel").addClass('dropLabelfocus_in');focusDom.focusInDom=focusDom.components[focusDom.focusIndex];}
function setfocusToGo(){focusDom.focusIndex++;$("#circle").removeClass('go_nonfocus').addClass('go_focus');$("#go_label").removeClass('buttonLabelnonfocus').addClass('buttonLabelfocus');$("#arrow_box").removeClass('dropdown_rect_selected').addClass('dropdown_rect');$("#arrow").removeClass('arrow_selected').addClass('arrow_unselected');$("#dropLabel").removeClass('dropLabelfocus_in');focusDom.focusInDom=focusDom.components[focusDom.focusIndex];}
locationPopup.KeyboardEvent=function(e,eventType){var target=main.target(e),key=main.keyCodeDic[target.keyCode],focusedDom,id;$("#location_error").fadeOut();switch(eventType){case"keydown":focusedDom=focusDom.focusInDom||"";id=focusedDom.id||"";switch(key){case"arrowdown":if(focusDom.focusIndex===0){setfocusToGo();}else if(focusDom.focusIndex>1&&(focusDom.components.length-1)!==focusDom.focusIndex){dropdown.Navigation("arrowdown");}
break;case"arrowup":if(focusDom.focusIndex===1){setfocusTodropDown();}else if(focusDom.focusIndex>2){dropdown.Navigation("arrowup");}
break;case"arrowleft":if(focusDom.focusIndex!==0&&focusDom.focusIndex!==1){dropdown.closeDropdown();}
break;case"arrowright":if(focusDom.focusIndex===0){dropdown.openDropdown();}
break;case"ok":if(id==="dropLabel"){dropdown.openDropdown();}else if(id==="circle"){redirectListingscreen();}else if(focusDom.dropDownselected.id!==$('.dropdownCursor').attr('id')){if(focusDom.dropDownselected!==''){$("#"+focusDom.dropDownselected.id+' span').removeClass();}
$('#'+$('.dropdownCursor').attr('id')+' span').addClass('dropdownTick');focusDom.dropDownselected=focusDom.components[focusDom.focusIndex];focusDom.dropDownIndex=focusDom.focusIndex;dropdown.closeDropdown();}
break;case"return":e.preventDefault();if(focusDom.focusIndex>1){dropdown.closeDropdown();}else{main.loading.isOn=true;locationPopup.isVisible=false;$('#locationPopup').addClass('hide');main.exitPopup.create('locationPopup');}
break;default:return false;}
return true;}
return true;};locationPopup.create=function(dataResult){locationPopup.data=dataResult||"";var element;if(getCookie('location')!==""){main.localCode=getCookie('location');main.setSelectedCountry();main.mainBg=new main.createListing();main.initiate();}else if(!locationPopup.data&&locationPopup.data===""&&!locationPopup.data.Result&&locationPopup.data.Result===undefined&&!locationPopup.data.StatusCode&&locationPopup.data.StatusCode!==100&&getCookie('location')===""){main.networkPopup.create('returnExit');}else{element=document.createElement("div");document.body.appendChild(element);element.id='locationPopup';dropdown.createDropdown(locationPopup.data);}};locationPopup.getResponse=function(baseUrl){var URL=main.generateUrl(baseUrl),dataResult;try{$.ajax({type:"POST",url:URL,timeout:30000,success:function(data){main.loading.Off();main.splashScreen.free();try{dataResult=main.getData(data);main.locationData=dataResult;locationPopup.create(dataResult);}catch(ex){main.networkPopup.create('returnExit');}},error:function(ex){main.loading.Off();main.networkPopup.create('returnExit');}});}catch(ex){main.loading.Off();main.networkPopup.create('returnExit');}};dropdown.Navigation=function(key){if(key==="arrowup"){focusDom.focusIndex--;if(focusDom.focusIndex>3){$('.outerDrop').animate({scrollTop:86*(focusDom.focusIndex-4)},0);}
$("#"+focusDom.dropDownselected.id).removeClass('dropdownSelected');$("#"+focusDom.dropDownselected.id+' span').removeClass('dropdownTick');$('.locationData').removeClass('dropdownCursor');focusDom.focusInDom=focusDom.components[focusDom.focusIndex];$("#"+focusDom.focusInDom.id).addClass('dropdownCursor');if(focusDom.dropDownselected===focusDom.focusInDom){$("#"+focusDom.dropDownselected.id+" span").removeClass();$("#"+focusDom.dropDownselected.id+" span").addClass('dropdownTick');}else{$("#"+focusDom.dropDownselected.id+" span").removeClass();$("#"+focusDom.dropDownselected.id+" span").addClass('dropdowntickRed');}}else if(key==="arrowdown"){focusDom.focusIndex++;if(focusDom.focusIndex>4){$('.outerDrop').animate({scrollTop:86*(focusDom.focusIndex-4)},0);}
$("#"+focusDom.dropDownselected.id).removeClass('dropdownSelected');$('.locationData').removeClass('dropdownCursor');focusDom.focusInDom=focusDom.components[focusDom.focusIndex];$("#"+focusDom.focusInDom.id).addClass('dropdownCursor');if(focusDom.dropDownselected===focusDom.focusInDom){$("#"+focusDom.dropDownselected.id+" span").removeClass();$("#"+focusDom.dropDownselected.id+" span").addClass('dropdownTick');}else{$("#"+focusDom.dropDownselected.id+" span").removeClass();$("#"+focusDom.dropDownselected.id+" span").addClass('dropdowntickRed');}}
if(focusDom.focusInDom.id!==focusDom.dropDownselected.id){$("#"+focusDom.dropDownselected.id).addClass('dropdownSelected');}};function animation(){locationPopup.isVisible=true;$("#locationPopup").animate({top:"0px"},0);}
function setCursorTodrop(){$("#arrow_box").removeClass('dropdown_rect_selected').addClass('dropdown_rect');$("#arrow").removeClass('arrow_selected').addClass('arrow_unselected');$("#dropLabel").removeClass('dropLabelfocus_in');dropdown.enter_focus();return true;}
dropdown.openDropdown=function(){if(focusDom.dropDownselected!==''){$("#"+focusDom.dropDownselected.id+' span').removeClass().addClass('dropdownTick');;}
$('#dropLabel').text('SELECT LOCATION');main.loading.isOn=true;setCursorTodrop();$('.outerDrop').animate({width:"400px"},function(){main.loading.isOn=false;});$('.outerDrop').css('overflow-y','hidden');if($(".locationData").length>3){$('.outerDrop').css('overflow-y','scroll');}};dropdown.closeDropdown=function(){main.loading.isOn=true;$('.outerDrop').animate({width:"0px"},function(){$("#arrow_box").removeClass('dropdown_rect').addClass('dropdown_rect_selected');$("#arrow").removeClass('arrow_unselected').addClass('arrow_selected');$("#dropLabel").addClass('dropLabelfocus_in');$("#"+focusDom.focusInDom.id).removeClass('dropdownCursor');if(focusDom.dropDownselected!==''){focusDom.focusInDom=focusDom.dropDownselected;$('.locationData').removeClass('dropdownSelected');}else{$('.locationData').removeClass('dropdownCursor');focusDom.focusIndex=2;focusDom.focusInDom=focusDom.components[focusDom.focusIndex];$(".outerDrop").animate({scrollTop:0},0);}
$("#"+focusDom.focusInDom.id).addClass('dropdownCursor');dropdown.leave_focus();main.loading.isOn=false;if(focusDom.dropDownselected!==''){$('#dropLabel').text(document.getElementById(focusDom.dropDownIndex-2).innerHTML.toUpperCase());}});};dropdown.createDropdown=function(data){var country,countries=data.Result.length,code,CountryString,country_ref=0;document.getElementById('locationPopup').innerHTML='<div id="mask"></div><div id="location_background"><div id="gradient"><div id="location_outer"><div class="logo logo_svg"></div><span id="text_label">WHERE ARE YOU FROM?</span>'+'<div id="welcome_text">Welcome to the Panasonic Cooking application!</div><span id="from_text">I AM FROM:</span><div id="dropLabel" class="dropLabelfocus dropLabelfocus_in">SELECT LOCATION</div>'+'<div id="arrow_box" class="dropdown_rect_selected"></div>'+'<div id="arrow" class="arrow_selected"></div>'+'<span id="location_error">* Please select location</span>'+'<div id="circle" class="go_nonfocus"></div>'+'<span id="go_label" class="buttonLabelnonfocus">GO</span>'+'<div class="outerDrop"><div class="innerDrop"></div></div></div></div></div>';focusDom.components=[document.getElementById('dropLabel'),document.getElementById('circle')];for(country=0;country<countries;country++){if(data.Result[country].CountryString!=='Others'){$('.innerDrop').append("<span id="+data.Result[country].Code+" class='locationData'><customTag id="+country_ref+">"+data.Result[country].CountryString+"</customTag><span id='tick'></span></span>");focusDom.components.push(document.getElementById(data.Result[country].Code));}else{code=data.Result[country].Code;CountryString=data.Result[country].CountryString;country_ref--;}
country_ref++;}
if(code!==undefined){$('.innerDrop').append("<span id="+code+" class='locationData'><customTag id="+country_ref+">"+CountryString+"</customTag><span id='tick'></span></span>");focusDom.components.push(document.getElementById(code));}
$('.innerDrop span:first-child').addClass('dropdownCursor');animation();locationPopup.enter_focus();};dropdown.enter_focus=function(){if(focusDom.dropDownselected!==''){focusDom.focusIndex=focusDom.dropDownIndex;focusDom.focusInDom=focusDom.dropDownfocus;}else{focusDom.focusIndex=2;focusDom.focusInDom=focusDom.components[focusDom.focusIndex];}};dropdown.leave_focus=function(){focusDom.focusInDom=focusDom.components[0];focusDom.focusIndex=0;};locationPopup.enter_focus=function(){main.focusedDom=locationPopup;focusDom.focusInDom=focusDom.components[0];focusDom.dropDownfocus=focusDom.components[2];};locationPopup.leave_focus=function(){free();};return locationPopup;}($,window,document,main,main.locationPopup));main.exitPopup=(function($,window,document,main,exitPopup){"use strict";var exitPopup={isVisible:false},focusDom={focusInDom:'',components:[],focusIndex:0};function free(){$("#exitPopup").animate({top:"-1080px"},function(){var obj=document.getElementById('exitPopup');obj.innerHTML='';obj.parentNode.removeChild(obj);});}
function returnBack(){if(exitPopup.parameters==='locationPopup'){$('#exitPopup').addClass('hide');main.focusedDom=main.locationPopup;$('#locationPopup').removeClass('hide');}else if(exitPopup.parameters==='networkPopup'){$('#exitPopup').addClass('hide');main.focusedDom=main.networkPopup;$('#networkPopup').removeClass('hide');}else if(exitPopup.parameters==='grid'){$('#exitPopup').addClass('hide');main.oldCursor.enter_focus();}else{this.leave_focus();}
main.loading.isOn=false;return true;}
exitPopup.KeyboardEvent=function(e,eventType){var target=main.target(e),keyCode=target.keyCode,key=main.keyCodeDic[keyCode],focusedDom={},id;switch(eventType){case"keydown":id=focusedDom.id||"";switch(key){case"arrowleft":case"arrowright":if(focusDom.focusIndex===0){focusDom.focusIndex++;$('#yes_exit').removeClass('yes_exit_focus').addClass('yes_exit_nonfocus');$('#yes_label').removeClass('buttonLabelfocus').addClass('buttonLabelnonfocus');$('#no_label').removeClass('buttonLabelnonfocus').addClass('buttonLabelfocus');$('#no_exit').removeClass('no_exit_nonfocus').addClass('no_exit_focus');focusDom.focusInDom=focusDom.components[focusDom.focusIndex];}else if(focusDom.focusIndex===1){focusDom.focusIndex--;$('#no_exit').removeClass('no_exit_focus').addClass('no_exit_nonfocus');$('#yes_label').removeClass('buttonLabelnonfocus').addClass('buttonLabelfocus');$('#no_label').removeClass('buttonLabelfocus').addClass('buttonLabelnonfocus');$('#yes_exit').removeClass('yes_exit_nonfocus').addClass('yes_exit_focus');focusDom.focusInDom=focusDom.components[focusDom.focusIndex];}
break;case"ok":exitPopup.isVisible=false;if(focusDom.focusIndex===0){window.history.back();}else if(focusDom.focusIndex===1){returnBack();}
break;case"return":main.loading.isOn=true;exitPopup.isVisible=false;e.preventDefault();returnBack();break;default:return false;}
return true;}
return true;};function animate(){$("#exitPopup").animate({top:"0px"},50,function(){exitPopup.enter_focus();main.isLoading=false;});}
exitPopup.enter_focus=function(){focusDom.focusIndex=0;main.focusedDom=exitPopup;focusDom.focusInDom=focusDom.components[focusDom.focusIndex];};exitPopup.create=function(param){exitPopup.parameters=param||"";if(main.isAvailable("exitPopup")===null){var element=document.createElement("div");document.body.appendChild(element);element.id='exitPopup';element.innerHTML='<div id="mask"></div><div id="exit_background"><div id="exit_gradient"></div><div class="logo_exit logo_svg"></div>'+'<span id="exit_warning_msg">Do you want to exit the application ?</span><span id="yes_exit" class="yes_exit_focus"></span>'+'<span id="no_exit" class="no_exit_nonfocus"></span><span id="yes_label" class="buttonLabelfocus">YES</span><span id="no_label" class="buttonLabelnonfocus">NO</span></div>';focusDom.components=[document.getElementById('yes_exit'),document.getElementById('no_exit')];}else{$('#exitPopup').removeClass('hide');focusDom.focusIndex=0;$('#yes_exit').removeClass('yes_exit_nonfocus').addClass('yes_exit_focus');$('#yes_label').removeClass('buttonLabelnonfocus').addClass('buttonLabelfocus');$('#no_label').removeClass('buttonLabelfocus').addClass('buttonLabelnonfocus');$('#no_exit').removeClass('no_exit_focus').addClass('no_exit_nonfocus');focusDom.focusInDom=focusDom.components[focusDom.focusIndex];}
exitPopup.isVisible=true;exitPopup.enter_focus();main.loading.isOn=false;};return exitPopup;}($,window,document,main,main.exitPopup));main.networkPopup=(function($,window,document,main,networkPopup){"use strict";var networkPopup={isVisible:false};function animate(){networkPopup.isVisible=true;$("#networkPopup").animate({top:"0px"},50);}
function free(){$("#networkPopup").animate({top:"-1080px"},function(){var obj=document.getElementById('networkPopup');obj.innerHTML='';obj.parentNode.removeChild(obj);},50);}
networkPopup.KeyboardEvent=function(e,eventType){var target=main.target(e),key=main.keyCodeDic[target.keyCode];switch(eventType){case"keydown":switch(key){case"return":e.preventDefault();this.leave_focus();break;default:return false;}
break;}
return true;};networkPopup.create=function(param){networkPopup.returnVal=param||"";var element=document.createElement("div");document.body.appendChild(element);element.setAttribute('id','networkPopup');document.getElementById('networkPopup').innerHTML='<div id="mask"></div><div id="network_background"><div id="network_gradient"></div></div><div class="logo_network logo_svg"></div>'+'<div id="network_error"></div>';animate();this.enter_focus();};networkPopup.enter_focus=function(){main.focusedDom=networkPopup;};networkPopup.leave_focus=function(){networkPopup.isVisible=false;if(networkPopup.returnVal==="returnExit"){$('#networkPopup').addClass('hide');main.exitPopup.create('networkPopup');}else{free();}};return networkPopup;}($,window,document,main,main.networkPopup));var errorPopUp=(function($,window,document,main){var obj={'isVisible':false};obj.backBg=false;obj.show=function(txt){var text=txt||"NO DATA AVAILABLE.";var bg=main.createElement('div',{classname:'errorBg',id:'errorBg'});var outerBg=main.createElement('div',{classname:'errorOuterBg',id:'errorOuterBg',content:text});msg=main.createElement('div',{classname:'errorMsg',id:'errorMsg',content:text});var img=main.createElement('div',{classname:'errorImg',id:'errorImg',});bg.appendChild(img);bg.appendChild(outerBg);document.body.appendChild(bg);var width=$("#errorOuterBg").width()+100;width=(width>1724)?(1724):(width);$("#errorOuterBg").css('width',width);var baseWidth=$("#errorOuterBg").width()+96;$("#errorBg").css('width',baseWidth);var marginLeft=960-(($("#errorBg").width())/2);$("#errorBg").css('left',marginLeft);obj.isVisible=true;};obj.hide=function(){$("#errorBg").remove();obj.isVisible=false;};return obj;})($,window,document,main);main.keyboardTop=(function($,document,main,keyboardTop){"use strict";var keyboardTop={},focusDom={focusInDom:'',selectedIndex:0,components:[],focusIndex:0};keyboardTop.KeyboardEvent=function(e,eventType){var target=main.target(e),key=main.keyCodeDic[target.keyCode];e.preventDefault();switch(eventType){case"keydown":switch(key){case"arrowleft":if(focusDom.focusIndex===0){document.getElementById('linearAnim_radio').className='mostdiscussedCursor';}else if(focusDom.focusIndex===1){document.getElementById('linearAnim_radio').className='mostrecentCursor';}else if(focusDom.focusIndex===2){document.getElementById('linearAnim_radio').className='mostpopularCursor';}
$("#"+focusDom.focusInDom.id).next().removeClass('cursortext').addClass('normaltext');focusDom.focusIndex=(focusDom.focusIndex===0)?2:focusDom.focusIndex-=1;focusDom.focusInDom=focusDom.components[focusDom.focusIndex];$("#"+focusDom.focusInDom.id).next().removeClass('normaltext').addClass('cursortext');if(focusDom.focusIndex!==focusDom.selectedIndex){$("#"+focusDom.components[focusDom.selectedIndex].id).removeClass('radioCursor');}else{$("#"+focusDom.components[focusDom.selectedIndex].id).addClass('radioCursor');}
break;case"arrowright":if(focusDom.focusIndex===0){document.getElementById('linearAnim_radio').className='mostpopularCursor';}else if(focusDom.focusIndex===1){document.getElementById('linearAnim_radio').className='mostdiscussedCursor';}else if(focusDom.focusIndex===2){document.getElementById('linearAnim_radio').className='mostrecentCursor';}
$("#"+focusDom.focusInDom.id).next().removeClass('cursortext').addClass('normaltext');focusDom.focusIndex=(focusDom.focusIndex===2)?0:focusDom.focusIndex+=1;focusDom.focusInDom=focusDom.components[focusDom.focusIndex];$("#"+focusDom.focusInDom.id).next().removeClass('normaltext').addClass('cursortext');if(focusDom.focusIndex!==focusDom.selectedIndex){$("#"+focusDom.components[focusDom.selectedIndex].id).removeClass('radioCursor');}else{$("#"+focusDom.components[focusDom.selectedIndex].id).addClass('radioCursor');}
break;case"arrowdown":this.leave_focus(1);break;case"arrowup":this.leave_focus(5);break;case"ok":$("#"+focusDom.components[focusDom.selectedIndex].id).removeClass('radioSelected').addClass('radioNormal');$("#"+focusDom.components[focusDom.selectedIndex].id).next().removeClass('selectedtext').addClass('normaltext');focusDom.selectedIndex=focusDom.focusIndex;$("#"+focusDom.focusInDom.id).removeClass('radioNormal').addClass('radioSelected');$("#"+focusDom.focusInDom.id).next().removeClass('normaltext').addClass('selectedtext');if(focusDom.focusIndex===0){document.getElementById('radio_bg').className='mostrecentCursor';}else if(focusDom.focusIndex===1){document.getElementById('radio_bg').className='mostpopularCursor';}else if(focusDom.focusIndex===2){document.getElementById('radio_bg').className='mostdiscussedCursor';}
$("#"+focusDom.focusInDom.id).addClass('radioCursor');break;case"return":main.keyboardContainer.animDown();break;case"blue":case"yellow":case"green":e.preventDefault();main.keyboardContainer.hotKeypress(key);break;default:main.keyboardContainer.textboxErrorcheck();}
return true;}
return true;};keyboardTop.enter_focus=function(){main.focusedDom=keyboardTop;focusDom.components=[document.getElementById('MostRecent'),document.getElementById('MostPopular'),document.getElementById('MostDiscussed')];var focusId=$('.radioSelected').attr('id');if(focusId==='MostRecent'){focusDom.focusInDom=focusDom.components[0];focusDom.selectedIndex=focusDom.focusIndex=0;document.getElementById('linearAnim_radio').className='mostrecentCursor';}else if(focusId==='MostPopular'){focusDom.focusInDom=focusDom.components[1];focusDom.selectedIndex=focusDom.focusIndex=1;document.getElementById('linearAnim_radio').className='mostpopularCursor';}else if(focusId==='MostDiscussed'){focusDom.focusInDom=focusDom.components[2];focusDom.selectedIndex=focusDom.focusIndex=2;document.getElementById('linearAnim_radio').className='mostdiscussedCursor';}
if(focusDom.focusInDom.id===focusId){$("#"+focusDom.focusInDom.id).addClass('radioCursor');}
$("#"+focusDom.focusInDom.id).next().addClass('cursortext');$('#linearAnim_radio').css('display','block');};keyboardTop.leave_focus=function(focusSet){var focusSet=focusSet||1;focusDom.focusIndex=focusDom.selectedIndex;$("#"+focusDom.focusInDom.id).removeClass('radioCursor');$("#"+focusDom.focusInDom.id).next().removeClass('cursortext').addClass('normaltext');$('#linearAnim_radio').css('display','none');main.keyboardContainer.focusIn(focusSet);};return keyboardTop;}($,document,main,main.keyboardTop));main.getSubMenu=function(url){main.loading.On();var baseUrl=url||"";var URL=main.generateUrl(baseUrl);try{$.ajax({type:"POST",url:URL,dataType:"json",timeout:30000,success:function(data){try{var data=main.getData(data);if(data!=null){if(data.StatusCode==100){for(var item in data.Result){if(data.Result[item].DisplayName=="FOODHACKS"||data.Result[item].DisplayName=="RECIPES"||data.Result[item].DisplayName=="PRODUCTS"){main.subMenuData[data.Result[item].DisplayName]=[];main.subMenuCode[data.Result[item].DisplayName]=[];main.subMenuData[data.Result[item].DisplayName]=data.Result[item].SubCategories.map(function(value){return value.DisplayName;})
main.subMenuCode[data.Result[item].DisplayName]=data.Result[item].SubCategories.map(function(value){return value.Code;})}
if(main.subMenuData[data.Result[item].DisplayName].length>8){main.subMenuDataPg2[data.Result[item].DisplayName]=[];main.subMenuDataPg2[data.Result[item].DisplayName]=data.Result[item].SubCategories.map(function(value){return value.DisplayName;})
main.subMenuCodePg2[data.Result[item].DisplayName]=data.Result[item].SubCategories.map(function(value){return value.Code;})}}
main.subMenuCode["PRODUCTS"].push("menu item 5")
main.subMenuCode["PRODUCTS"].push("menu item 6")}}}catch(e){}},error:function(jqXHR,textStatus,errorThrown){document.getElementById('Message').innerHTML="Cross Domain Error";}});}catch(e){}};main.pageLoad=function(){main.locationPopup.getResponse(main.baseUrl+main.api.location);};}catch(e){}
document.onkeydown=function(e){"use strict";main.MainKeyboardEvent(e,"keydown");};